name: Build Alpine Image

on:
  push:
    branches:
      - master  # Trigger when pushing to master branch

jobs:
  build:
    runs-on: ubuntu-latest  # GitHub Actions runner

    steps:
      # Step 1: Checkout the code
      - name: Checkout repository
        uses: actions/checkout@v2

      # Step 2: Install necessary dependencies for the build machine (without X11)
      - name: Install dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y \
            qemu-user-static \
            curl \
            git \
            sudo \
            libssl-dev \
            build-essential

      # Step 3: Make the script executable
      - name: Make scripts executable
        run: |
          chmod +x ./create_kindle_alpine_image.sh

      # Step 4: Run the bash script (with sudo if needed)
      - name: Run bash script to create Alpine image
        run: |
          sudo ./create_kindle_alpine_image.sh


  
